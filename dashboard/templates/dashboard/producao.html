{% extends 'dashboard/base.html' %}
{% load static %}
{% block title %}Produção{% endblock %}

{% block style %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
{% include './header.html' %}
<link rel="stylesheet" href="{% static 'dashboard/css/producao.css' %}">
{% endblock %}

{% block content %}


<div class="container">
    <div class="chart-container">
        <canvas id="beeChart"></canvas>
    </div>

    <div class="form-container">
        <!-- Formulário normal que salva no banco -->
        <form id="dataForm" method="POST">
            {% csrf_token %}
            <label for="abelhas">Quantidade de abelhas:</label>
            <input type="number" name="numero_abelhas" id="abelhas" required />

            <label for="mel">Quantidade de mel:</label>
            <input type="number" step="0.01" name="quantidade_mel" id="mel" required />

            <label for="mes">Selecione um mês:</label>
            <select name="mes" id="mes" required>
                <option value="" disabled selected>Selecione um mês:</option>
                <option value="Janeiro">Janeiro</option>
                <option value="Fevereiro">Fevereiro</option>
                <option value="Março">Março</option>
                <option value="Abril">Abril</option>
                <option value="Maio">Maio</option>
                <option value="Junho">Junho</option>
                <option value="Julho">Julho</option>
                <option value="Agosto">Agosto</option>
                <option value="Setembro">Setembro</option>
                <option value="Outubro">Outubro</option>
                <option value="Novembro">Novembro</option>
                <option value="Dezembro">Dezembro</option>
            </select>

            <button type="submit">Registrar</button>
        </form>
    </div>
</div>

<!-- Div escondida para passar os dados do banco para o JS -->
<div id="producoes" style="display:none;" data-producoes='[
    {% for p in producoes %}
    {"mes":"{{ p.mes }}","numero_abelhas":{{ p.numero_abelhas }},"quantidade_mel":{{ p.quantidade_mel }} }{% if not forloop.last %},{% endif %}
    {% endfor %}
]'></div>

<footer>
    <!-- seu footer normal -->
</footer>

<!-- Chart.js e JS separado -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'dashboard/js/producao.js' %}"></script>
{% endblock %}
